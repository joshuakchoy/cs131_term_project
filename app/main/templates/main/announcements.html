{% extends "base.html" %}
{% block title %}Announcements{% endblock %}

{% block content %}
<h1>Course Announcements</h1>

{% if current_user.role in ['instructor', 'ta'] %}
<a href="{{ url_for('main.create_announcement') }}" class="teacher-btn">Post New Announcement</a>
{% endif %}

{% if announcements and announcements|length > 0 %}
<div class="announcements-container">
    {% for announcement in announcements %}
    <div class="card announcement-card">
        <h2>{{ announcement.title }}</h2>
        <div class="announcement-meta">
            <p><strong>Course:</strong> {{ announcement.course.title }} ({{ announcement.course.code }})</p>
            <p><strong>Posted by:</strong> {{ announcement.author.username }} ({{ announcement.author.role }})</p>
            <p><strong>Date:</strong> {{ announcement.timestamp.strftime('%Y-%m-%d %H:%M') }}</p>
        </div>
        <hr>
        <div class="announcement-content">
            {{ announcement.content }}
        </div>
    </div>
    {% endfor %}
</div>
{% else %}
<p>No announcements yet.</p>
{% endif %}

{% endblock %}
