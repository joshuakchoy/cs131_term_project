{% extends "base.html" %} {% block title %}{{ course.title }}{% endblock %} {%
block content %}

<div class="course-container">
  <h1>{{ course.title }}</h1>
  <p>
    <strong>Course Code:</strong> {{ course.code if course.code else "N/A" }}
  </p>
  {% if course.description %}
  <p><strong>Description:</strong> {{ course.description }}</p>
  {% endif %}

  <hr />

  <h2>Enrolled Students</h2>
  {% if students and students|length > 0 %}
  <ul class="students-list">
    {% for student in students %}
    <li class="student-item">
      <strong>{{ student.username }}</strong> ({{ student.email }})
    </li>
    {% endfor %}
  </ul>
  {% else %}
  <p>No students enrolled in this course yet.</p>
  {% endif %}

  <hr />
  <h2>Assignments</h2>
  {% if assignments and assignments|length > 0 %}
  <ul class="assignments-list">
    {% for assignment in assignments %}
    <li class="assignment-item">
      <h3>{{ assignment.title }}</h3>
      {% if assignment.description %}
      <p>{{ assignment.description }}</p>
      {% endif %}
      <p><strong>Due:</strong> {{ assignment.due_date }}</p>
    </li>
    {% endfor %}
  </ul>
  {% else %}
  <p>No assignments for this course yet.</p>
  {% endif %}
  <hr />

  <h2>Add a Student</h2>
  <form
    method="POST"
    action="{{ url_for('main.enroll_student', course_id=course.id) }}"
  >
    {{ form.hidden_tag() }}
    <p>
      {{ form.student_identifier.label }}<br />
      {{ form.student_identifier(size=40) }}<br />
      {% for error in form.student_identifier.errors %}
      <span style="color: red">[{{ error }}]</span>
      {% endfor %}
    </p>
    <p>{{ form.submit() }}</p>
  </form>

  <hr />
  <div class="course-actions">
    <a href="{{ url_for('main.manage_tas', course_id=course.id) }}" class="button-ta">Manage TAs</a>
    <a href="{{ url_for('main.classes') }}" class="button-back">Back to Classes</a>
  </div>
</div>

<style>
.course-actions {
    display: flex;
    gap: 10px;
    margin-top: 20px;
}

.button-ta, .button-back {
    padding: 10px 20px;
    border-radius: 5px;
    text-decoration: none;
    font-weight: 600;
    transition: all 0.2s ease;
    display: inline-block;
}

.button-ta {
    background: #581f91;
    color: white;
}

.button-ta:hover {
    background: #6f2bb0;
    transform: scale(1.05);
}

.button-back {
    background: #6c757d;
    color: white;
}

.button-back:hover {
    background: #5a6268;
}
</style>

{% endblock %}
