<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>{% block title %}My Site{% endblock %}</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@24,400,0,0" />
  <link rel="stylesheet" href="{{ url_for('static', filename='side.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>
<body>
  <div class="layout">
    <div class="sidebar-part">
      {% include 'sidebar.html' %}
    </div>
    <div class="content">
      {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
          <div class="flashes">
            {% for category, message in messages %}
              <div class="flash {{ category }}">{{ message }}</div>
            {% endfor %}
          </div>
        {% endif %}
      {% endwith %}

      {% block content %}
      <!-- Child templates will fill this in -->
      {% endblock %}
    </div>
  </div>
  
  <!-- Floating Messaging Hub Button -->
  <div class="message-hub-container">
    <button class="message-hub-button" id="messageHubButton">
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
      </svg>
      <span class="message-badge" id="messageBadge" style="display: none;">0</span>
    </button>
    
    <!-- Messaging Hub Modal -->
    <div class="message-hub-modal" id="messageHubModal">
      <div class="message-hub-header">
        <h3>Messages</h3>
        <button class="message-hub-close" id="closeMessageHub">&times;</button>
      </div>
      <div class="message-hub-content">
        <iframe src="{{ url_for('main.messages') }}" frameborder="0"></iframe>
      </div>
    </div>
  </div>
  
  <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>